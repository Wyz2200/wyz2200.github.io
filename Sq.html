<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>簡約記帳（Vision Pro 風格）</title>
<style>
  :root{
    --bg-1: #efe6dc;
    --bg-2: #e2d2c0;
    --card-bg: rgba(255,255,255,0.18);
    --card-border: rgba(255,255,255,0.25);
    --accent: rgba(48,41,38,0.95);
    --accent-soft: rgba(48,41,38,0.65);
    --success: #2ecc71;
    --danger: #e74c3c;
    --glass-blur: 14px;
    font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans TC","Helvetica Neue",Arial;
  }
  body{
    margin:0;
    min-height:100vh;
    background: linear-gradient(160deg, var(--bg-1) 0%, var(--bg-2) 100%);
    display:flex;
    justify-content:center;
    padding:16px;
    color:var(--accent);
  }
  main.app{
    width:100%;
    max-width:480px; /* 手機為主，窄版 */
    display:flex;
    flex-direction:column;
    gap:20px;
  }
  .panel{
    background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
    border-radius:20px;
    padding:16px;
    box-shadow: 0 10px 30px rgba(17,12,10,0.12);
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: 1px solid var(--card-border);
  }
  .panel::before{
    content:"";
    position:absolute;
    inset:0;
    border-radius:inherit;
    pointer-events:none;
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.06);
  }
  header h1{margin:0 0 6px;font-size:20px;}
  header p{margin:0;font-size:13px;color:var(--accent-soft);}
  .balance{margin-top:12px;}
  .balance .big{font-size:26px;font-weight:700;}
  .balance .small{font-size:13px;color:var(--accent-soft);}
  form.row{display:flex;flex-direction:column;gap:10px;margin-top:14px;}
  input,select{
    padding:10px 12px;
    border-radius:12px;
    border:1px solid rgba(0,0,0,0.06);
    background: rgba(255,255,255,0.6);
    font-size:14px;
  }
  .controls{display:flex;flex-wrap:wrap;gap:8px;}
  button.btn{
    flex:1;
    padding:10px;
    border-radius:12px;
    border:none;
    font-weight:600;
    cursor:pointer;
    background: linear-gradient(180deg, rgba(255,255,255,0.22), rgba(255,255,255,0.08));
  }
  .right{display:flex;flex-direction:column;gap:12px;}
  .tx{display:flex;align-items:center;gap:10px;padding:12px;border-radius:14px;
      background:linear-gradient(180deg,rgba(255,255,255,0.1),rgba(255,255,255,0.04));
      border:1px solid rgba(255,255,255,0.06);}
  .tx .meta{flex:1;}
  .tx .title{font-weight:700;margin-bottom:4px;}
  .tx .desc{font-size:13px;color:var(--accent-soft);}
  .amount{min-width:70px;text-align:right;font-weight:700;}
  .amount.positive{color:var(--success);}
  .amount.negative{color:var(--danger);}
  .tag{display:inline-block;padding:4px 6px;border-radius:999px;font-size:11px;margin-right:4px;
       background:rgba(255,255,255,0.06);color:var(--accent-soft);}
  .empty{text-align:center;color:var(--accent-soft);padding:16px;}
</style>
</head>
<body>
<main class="app">
  <!-- 新增記帳 -->
  <section class="panel">
    <header>
      <h1>簡約記帳</h1>
      <p>Vision Pro 風格毛玻璃</p>
    </header>
    <div class="balance">
      <div class="small">餘額</div>
      <div class="big" id="balance">NT$ 0</div>
    </div>
    <form id="txForm" class="row">
      <input type="text" id="title" placeholder="標題" required>
      <input type="number" id="amount" placeholder="金額" required min="0" step="0.01">
      <input type="text" id="note" placeholder="備註">
      <select id="category">
        <option value="food">餐飲</option>
        <option value="transport">交通</option>
        <option value="shopping">購物</option>
        <option value="income">收入</option>
        <option value="others">其他</option>
      </select>
      <select id="type">
        <option value="expense">支出</option>
        <option value="income">收入</option>
      </select>
      <input id="date" type="date">
      <div class="controls">
        <button type="submit" class="btn">新增</button>
        <button type="reset" class="btn">清除</button>
      </div>
    </form>
  </section>

  <!-- 清單 -->
  <section class="panel right">
    <div id="txList"></div>
    <div id="empty" class="empty">目前沒有記錄</div>
  </section>
</main>

<script>
const STORAGE_KEY="vision_expense_mobile";
let transactions=[];
function save(){localStorage.setItem(STORAGE_KEY,JSON.stringify(transactions))}
function load(){transactions=JSON.parse(localStorage.getItem(STORAGE_KEY)||"[]")}
function fmt(n){return "NT$ "+n.toLocaleString()}
function render(){
  const list=document.getElementById("txList");
  list.innerHTML="";
  if(transactions.length===0){document.getElementById("empty").style.display="block";}
  else{document.getElementById("empty").style.display="none";}
  let bal=0;
  for(const t of transactions){
    const div=document.createElement("div");
    div.className="tx";
    div.innerHTML=`<div class="meta"><div class="title">${t.title}<span class="tag">${t.category}</span></div>
                   <div class="desc">${t.note||""} ${t.date||""}</div></div>
                   <div class="amount ${t.type==="income"?"positive":"negative"}">
                   ${t.type==="income"?"+":"-"}${t.amount}</div>`;
    list.appendChild(div);
    bal += t.type==="income"? t.amount : -t.amount;
  }
  document.getElementById("balance").textContent=fmt(bal);
}
document.getElementById("txForm").addEventListener("submit",e=>{
  e.preventDefault();
  const t={title:title.value,amount:Number(amount.value),note:note.value,
           category:category.value,type:type.value,date:date.value};
  transactions.unshift(t);save();render();e.target.reset();
});
load();render();
</script>
</body>
</html>
